{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import Search from\"../search\";import CurrentWeather from\"../CurrentWeather\";import Forecast from\"../Forecast\";import{fetchWeatherData,fetchForecastData}from\"../api\";import{useLocalStorage}from\"../hooks/useLocalStorage\";import{motion,AnimatePresence}from\"framer-motion\";import{FaSun,FaMoon}from\"react-icons/fa\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Weather(){const[search,setSearch]=useState(\"\");const[loading,setLoading]=useState(false);const[error,setError]=useState(null);const[weatherData,setWeatherData]=useState(null);const[forecastData,setForecastData]=useState(null);const[unit,setUnit]=useLocalStorage(\"unit\",\"metric\");const[darkMode,setDarkMode]=useLocalStorage(\"darkMode\",false);const[lastSearched,setLastSearched]=useLocalStorage(\"lastSearched\",\"\");const[bgImage,setBgImage]=useState(\"\");useEffect(()=>{const hour=new Date().getHours();setBgImage(hour>=6&&hour<20?\"https://source.unsplash.com/1600x900/?sunny,day\":\"https://source.unsplash.com/1600x900/?night,stars\");},[]);useEffect(()=>{if(lastSearched){handleSearch(lastSearched);}},[]);useEffect(()=>{document.body.classList.toggle(\"dark-mode\",darkMode);},[darkMode]);async function handleSearch(searchTerm){setLoading(true);setError(null);try{const weather=await fetchWeatherData(searchTerm,unit);setWeatherData(weather);const forecast=await fetchForecastData(searchTerm,unit);setForecastData(forecast);setLastSearched(searchTerm);}catch(err){console.error(\"Search error:\",err);setError(\"Error fetching weather data: \".concat(err.message));}finally{setLoading(false);}}function handleUnitToggle(){setUnit(prevUnit=>prevUnit===\"metric\"?\"imperial\":\"metric\");}useEffect(()=>{if(weatherData){handleSearch(weatherData.name);}},[unit]);return/*#__PURE__*/_jsxs(\"div\",{className:\"weather-app \".concat(darkMode?'dark':'light'),style:{backgroundImage:\"url(\".concat(bgImage,\")\")},children:[/*#__PURE__*/_jsxs(motion.header,{initial:{y:-50,opacity:0},animate:{y:0,opacity:1},transition:{duration:0.5},children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Weather Insights\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"header-buttons\",children:[/*#__PURE__*/_jsx(motion.button,{className:\"mode-toggle\",onClick:()=>setDarkMode(!darkMode),whileHover:{scale:1.1},whileTap:{scale:0.9},children:darkMode?/*#__PURE__*/_jsx(FaSun,{}):/*#__PURE__*/_jsx(FaMoon,{})}),/*#__PURE__*/_jsxs(motion.button,{className:\"unit-toggle\",onClick:handleUnitToggle,whileHover:{scale:1.1},whileTap:{scale:0.9},children:[\"Switch to \",unit===\"metric\"?\"째F\":\"째C\"]})]})]}),/*#__PURE__*/_jsx(Search,{search:search,setSearch:setSearch,onSearch:handleSearch}),/*#__PURE__*/_jsxs(AnimatePresence,{children:[loading&&/*#__PURE__*/_jsx(motion.div,{className:\"loading\",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:\"Loading...\"}),error&&/*#__PURE__*/_jsx(motion.div,{className:\"error\",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:error}),weatherData&&!loading&&!error&&/*#__PURE__*/_jsx(CurrentWeather,{data:weatherData,unit:unit}),forecastData&&!loading&&!error&&/*#__PURE__*/_jsx(Forecast,{data:forecastData,unit:unit})]})]});}","map":{"version":3,"names":["React","useEffect","useState","Search","CurrentWeather","Forecast","fetchWeatherData","fetchForecastData","useLocalStorage","motion","AnimatePresence","FaSun","FaMoon","jsx","_jsx","jsxs","_jsxs","Weather","search","setSearch","loading","setLoading","error","setError","weatherData","setWeatherData","forecastData","setForecastData","unit","setUnit","darkMode","setDarkMode","lastSearched","setLastSearched","bgImage","setBgImage","hour","Date","getHours","handleSearch","document","body","classList","toggle","searchTerm","weather","forecast","err","console","concat","message","handleUnitToggle","prevUnit","name","className","style","backgroundImage","children","header","initial","y","opacity","animate","transition","duration","button","onClick","whileHover","scale","whileTap","onSearch","div","exit","data"],"sources":["/home/vishnu/Desktop/Projects/react/Weather_Insights/src/components/weather/index.jsx"],"sourcesContent":["\nimport React, { useEffect, useState } from \"react\";\nimport Search from \"../search\";\nimport CurrentWeather from \"../CurrentWeather\";\nimport Forecast from \"../Forecast\";\nimport { fetchWeatherData, fetchForecastData } from \"../api\";\nimport { useLocalStorage } from \"../hooks/useLocalStorage\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { FaSun, FaMoon } from \"react-icons/fa\";\n\nexport default function Weather() {\n  const [search, setSearch] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [weatherData, setWeatherData] = useState(null);\n  const [forecastData, setForecastData] = useState(null);\n  const [unit, setUnit] = useLocalStorage(\"unit\", \"metric\");\n  const [darkMode, setDarkMode] = useLocalStorage(\"darkMode\", false);\n  const [lastSearched, setLastSearched] = useLocalStorage(\"lastSearched\", \"\");\n  const [bgImage, setBgImage] = useState(\"\");\n\n  useEffect(() => {\n    const hour = new Date().getHours();\n    setBgImage(hour >= 6 && hour < 20 \n      ? \"https://source.unsplash.com/1600x900/?sunny,day\"\n      : \"https://source.unsplash.com/1600x900/?night,stars\");\n  }, []);\n\n  useEffect(() => {\n    if (lastSearched) {\n      handleSearch(lastSearched);\n    }\n  }, []);\n\n  useEffect(() => {\n    document.body.classList.toggle(\"dark-mode\", darkMode);\n  }, [darkMode]);\n\n  async function handleSearch(searchTerm) {\n    setLoading(true);\n    setError(null);\n    try {\n      const weather = await fetchWeatherData(searchTerm, unit);\n      setWeatherData(weather);\n      const forecast = await fetchForecastData(searchTerm, unit);\n      setForecastData(forecast);\n      setLastSearched(searchTerm);\n    } catch (err) {\n      console.error(\"Search error:\", err);\n      setError(`Error fetching weather data: ${err.message}`);\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  function handleUnitToggle() {\n    setUnit(prevUnit => prevUnit === \"metric\" ? \"imperial\" : \"metric\");\n  }\n\n  useEffect(() => {\n    if (weatherData) {\n      handleSearch(weatherData.name);\n    }\n  }, [unit]);\n\n  return (\n    <div className={`weather-app ${darkMode ? 'dark' : 'light'}`} style={{backgroundImage: `url(${bgImage})`}}>\n      <motion.header\n        initial={{ y: -50, opacity: 0 }}\n        animate={{ y: 0, opacity: 1 }}\n        transition={{ duration: 0.5 }}\n      >\n        <h1>Weather Insights</h1>\n        <div className=\"header-buttons\">\n          <motion.button\n            className=\"mode-toggle\"\n            onClick={() => setDarkMode(!darkMode)}\n            whileHover={{ scale: 1.1 }}\n            whileTap={{ scale: 0.9 }}\n          >\n            {darkMode ? <FaSun /> : <FaMoon />}\n          </motion.button>\n          <motion.button\n            className=\"unit-toggle\"\n            onClick={handleUnitToggle}\n            whileHover={{ scale: 1.1 }}\n            whileTap={{ scale: 0.9 }}\n          >\n            Switch to {unit === \"metric\" ? \"째F\" : \"째C\"}\n          </motion.button>\n        </div>\n      </motion.header>\n      <Search\n        search={search}\n        setSearch={setSearch}\n        onSearch={handleSearch}\n      />\n      <AnimatePresence>\n        {loading && (\n          <motion.div\n            className=\"loading\"\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n          >\n            Loading...\n          </motion.div>\n        )}\n        {error && (\n          <motion.div\n            className=\"error\"\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n          >\n            {error}\n          </motion.div>\n        )}\n        {weatherData && !loading && !error && (\n          <CurrentWeather data={weatherData} unit={unit} />\n        )}\n        {forecastData && !loading && !error && (\n          <Forecast data={forecastData} unit={unit} />\n        )}\n      </AnimatePresence>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}